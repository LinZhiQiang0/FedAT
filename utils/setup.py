import math

class ClientSetup():
    """联邦学习客户端设置"""

    # 通用属性
    epochs = {'MNIST':3, 'FashionMNIST':5, 'CIFAR':5}
    epoches = {'MNIST':3, 'FashionMNIST':5, 'CIFAR':5}
    batch_size = {'MNIST':10, 'FashionMNIST':50, 'CIFAR':50}
    trainset_size = {'MNIST':600, 'FashionMNIST':600, 'CIFAR':500}
    data_types = ['MNIST', 'FashionMNIST', 'CIFAR']
    model_size = {'MNIST':1.686, 'FashionMNIST':0, 'CIFAR':0.246}   # 单位MB
    compute_power_fluctuate_types = ['normal', 'uniform']
    max_round_old = 300
    max_round_new = 200
    bandwidth = 1.5


class ServerSetup():
    """联邦学习服务器设置"""

    # 客户端属性
    epoches = {'MNIST':3, 'FashionMNIST':5, 'CIFAR':5}
    # 服务器属性
    clients_rate_per_round = 0.15
    bias = 0.8
    data_types = ['MNIST', 'FashionMNIST', 'CIFAR']
    acc = {'MNIST':99, 'FashionMNIST':87, 'CIFAR':50}
    model_size = {'MNIST':1.686, 'FashionMNIST':0, 'CIFAR':0.246}   # 单位MB
    upload_rate = round(1.5 * math.log(1 + 100, 2) / 8, 4) # 单位MB/s 香农公式：C = B * log(1 + SNR, 2) Mb/s
    compute_power_fluctuate_types = ['normal', 'uniform']

    # 100个客户端的属性
    # 计算能力
    compute_power_list = [52, 80, 45, 27, 23, 72, 70, 50, 23, 47, 73, 68, 55, 21, 63, 50, 61, 61, 22, 30, 52, 72, 35, 59, 30, 61, 31, 70, 22, 42, 51, 60, 77, 32, 59, 53, 43, 76, 39, 67, 72, 32, 59, 75, 62, 33, 30, 65, 24, 47, 37, 24, 66, 49, 34, 65, 49, 36, 42, 46, 27, 58, 71, 47, 40, 44, 36, 33, 39, 80, 53, 35, 41, 78, 79, 26, 55, 65, 67, 66, 37, 62, 61, 63, 29, 20, 64, 50, 67, 39, 54, 26, 32, 76, 57, 20, 58, 35, 56, 77]
    # 带宽
    bw_list = [1.52, 1.81, 1.12, 1.65, 1.92, 1.24, 1.1, 1.13, 1.26, 1.7, 1.74, 1.47, 1.57, 1.31, 1.39, 1.45, 1.79, 1.37, 1.25, 1.33, 1.65, 1.61, 1.46, 1.12, 1.0, 1.62, 1.54, 1.84, 1.04, 1.5, 1.31, 1.81, 1.71, 1.86, 1.44, 1.42, 1.35, 1.29, 1.24, 1.36, 1.99, 1.14, 1.65, 1.76, 1.27, 1.39, 1.2, 1.28, 1.59, 1.4, 1.36, 1.6, 1.4, 1.48, 1.56, 1.73, 1.68, 1.68, 1.3, 1.28, 1.5, 1.34, 1.79, 1.68, 1.78, 1.71, 1.87, 1.47, 1.1, 1.5, 1.36, 1.8, 1.5, 1.26, 1.22, 1.51, 1.72, 1.76, 1.73, 1.67, 1.42, 2.0, 1.73, 1.42, 1.67, 1.68, 1.6, 1.46, 1.42, 1.5, 1.37, 1.63, 1.7, 1.71, 1.31, 1.7, 1.71, 1.9, 1.17, 1.08]
    # 计算能力变化
    scales_list = [0.13272, 0.11983, 0.16095, 0.1357, 0.14717, 0.15309, 0.15249, 0.11455, 0.13658, 0.10753, 0.14853, 0.14759, 0.15848, 0.10132, 0.10626, 0.14407, 0.15056, 0.1603, 0.14789, 0.107, 0.10313, 0.13423, 0.13803, 0.15754, 0.11576, 0.14473, 0.12267, 0.12804, 0.10939, 0.11745, 0.16405, 0.12364, 0.11803, 0.11261, 0.1378, 0.12183, 0.10347, 0.16659, 0.12154, 0.15034, 0.12469, 0.10186, 0.16641, 0.12219, 0.15498, 0.14399, 0.11876, 0.14951, 0.1119, 0.12795, 0.15476, 0.15503, 0.13984, 0.105, 0.12772, 0.12923, 0.13788, 0.10121, 0.13135, 0.13253, 0.14743, 0.11794, 0.13091, 0.11698, 0.12213, 0.13062, 0.13375, 0.12933, 0.12377, 0.12352, 0.10593, 0.15757, 0.10235, 0.16215, 0.16516, 0.12407, 0.15924, 0.13663, 0.14817, 0.12534, 0.12923, 0.15557, 0.10982, 0.10806, 0.12224, 0.14491, 0.10035, 0.1356, 0.15833, 0.13308, 0.15707, 0.14429, 0.16114, 0.14004, 0.14222, 0.1199, 0.1248, 0.15162, 0.16032, 0.15145]
    # 每个设备的训练时间队列长度，用于预测训练时间
    len_of_single_epoch_time_list_old = 5
    len_of_single_epoch_time_list_new = 20


    # 每个设备的训练时间队列长度，用于预测训练时间
    len_of_total_time_list_old = 5
    len_of_total_time_list_new = 20
